# üîß ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥ - ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô

## ‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- ‚úÖ Backend ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: http://localhost:3002
- ‚úÖ Frontend ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: http://localhost:5174
- ‚úÖ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß (UPSERT logic)
- ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Database Schema
- ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà

---

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà

### 1.1 ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
```
http://localhost:5174
```

### 1.2 ‡πÄ‡∏õ‡∏¥‡∏î Developer Console
- ‡∏Å‡∏î **F12** ‡∏ö‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î
- ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‚Üí **Inspect** ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ó‡πá‡∏ö **Console**

### 1.3 ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô Console ‚Üí ‡∏Å‡∏î **Enter**:

```javascript
fetch('/api/journal/trades/clear-mt5', { 
    method: 'DELETE',
    headers: { 'Content-Type': 'application/json' }
}).then(r => r.json()).then(d => {
    console.log('‚úÖ ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢:', d);
    alert('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MT5 ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß: ' + d.deletedCount + ' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
}).catch(e => {
    console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:', e);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + e.message);
});
```

### 1.4 ‡∏£‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
- ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"
- ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏•‡∏ö

---

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Database Schema

### 2.1 ‡πÄ‡∏õ‡∏¥‡∏î pgAdmin
- ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° **pgAdmin 4**
- Login ‡∏î‡πâ‡∏ß‡∏¢ Master Password

### 2.2 ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database
1. ‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏∑‡∏≠: ‡πÄ‡∏õ‡∏¥‡∏î **Servers** ‚Üí **PostgreSQL 16** (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ)
2. ‡πÄ‡∏õ‡∏¥‡∏î **Databases** ‚Üí **trading_journal**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà **trading_journal** ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Query Tool**

### 2.3 ‡∏£‡∏±‡∏ô SQL Script
1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå: `fix-duplicate-protection.sql` (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ)
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
3. ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô Query Tool
4. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° **Execute (F5)** ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô ‚ñ∂Ô∏è

### 2.4 ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
- ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô **"DROP INDEX"** ‡πÅ‡∏•‡∏∞ **"CREATE INDEX"** ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- ‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ indexes ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß:
  ```
  idx_trades_mt5_position_unique
  idx_trades_mt5_ticket_unique
  ```

---

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Restart EA ‡πÉ‡∏ô MT5

### 3.1 Remove EA
1. ‡πÄ‡∏õ‡∏¥‡∏î **MetaTrader 5**
2. ‡∏î‡∏π‡∏ó‡∏µ‡πà Chart ‡∏ó‡∏µ‡πà‡∏°‡∏µ EA ‡∏ï‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
3. **‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤** ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ EA (`JournalConnector`) ‡∏ö‡∏ô‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Expert list** ‚Üí **Remove**
5. ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà emoji üòä ‡∏ö‡∏ô chart ‚Üí **Expert Advisors** ‚Üí **Remove**

### 3.2 ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà
- ‡∏£‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì **2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ**

### 3.3 ‡πÉ‡∏™‡πà EA ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
1. ‡πÄ‡∏õ‡∏¥‡∏î **Navigator** (Ctrl+N)
2. ‡∏Ç‡∏¢‡∏≤‡∏¢ **Expert Advisors**
3. ‡∏•‡∏≤‡∏Å **JournalConnector** ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏ö‡∏ô Chart
4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:
   - ‚úÖ Allow WebRequest
   - ‚úÖ Allow DLL imports (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **OK**

### 3.4 ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Experts Tab
‡∏î‡∏π‡∏ó‡∏µ‡πà **Terminal** ‚Üí ‡πÅ‡∏ó‡πá‡∏ö **Experts** ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô:
```
üöÄ JournalConnector EA Initialized
üì° Server URL: http://127.0.0.1:3002/api/journal/trades
üìù Registering account: [Account Number]
‚úÖ Account registered successfully
üîÑ Starting historical trades sync...
üìä Found [X] deals in history
üì§ Syncing batch...
‚úÖ Batch synced: {...}
‚úÖ Historical sync completed
```

---

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### 4.1 Refresh ‡πÄ‡∏ß‡πá‡∏ö
- ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà http://localhost:5174
- ‡∏Å‡∏î **F5** ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Refresh

### 4.2 ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Trades ‡πÉ‡∏ô Trading Journal
- **‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô MT5**
- ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‚Üí ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1

### 4.3 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏õ‡∏¥‡∏î Trade ‡πÉ‡∏´‡∏°‡πà
1. ‡πÄ‡∏õ‡∏¥‡∏î Position ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô MT5
2. ‡∏î‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πá‡∏ö ‚Üí ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô Trade ‡πÉ‡∏´‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
3. ‡∏õ‡∏¥‡∏î Position
4. ‡∏î‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πá‡∏ö ‚Üí Trade ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πá‡∏ô CLOSED

---

## ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏°‡∏∑‡πà‡∏≠:
- ‚úÖ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Trades ‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö **‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö** MT5
- ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Trade ‡∏ã‡πâ‡∏≥ (‡∏Ñ‡∏π‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)
- ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Trade ‡πÉ‡∏´‡∏°‡πà ‚Üí ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‚úÖ Remove ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà EA ‡∏Å‡∏•‡∏±‡∏ö ‚Üí ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î duplicate

---

## ‚ùå ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏±‡∏á‡∏ã‡πâ‡∏≥‡∏≠‡∏¢‡∏π‡πà
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏ô SQL Script ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‡∏•‡∏≠‡∏á Remove EA ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏Å‡∏•‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà
3. Clear ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: pgAdmin ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö PostgreSQL Service ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‡πÄ‡∏õ‡∏¥‡∏î Services ‚Üí ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "PostgreSQL" ‚Üí Start
3. Password: `0000`

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: EA ‡πÑ‡∏°‡πà sync
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö WebRequest URL ‡πÉ‡∏ô MT5:
   - Tools ‚Üí Options ‚Üí Expert Advisors ‚Üí Add URL: `http://127.0.0.1:3002`
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:
   - ‡πÄ‡∏õ‡∏¥‡∏î http://localhost:3002 ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô "Trading Journal Backend"

---

## üìû ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠

‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏™‡πà‡∏á Screenshot ‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°:
1. Console output ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1
2. Query result ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2
3. MT5 Experts tab ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3
